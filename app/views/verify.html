<div class="verify">
  <div id="instructions" ng-if="!ready">
    <div class="row">
      <h2>¿Cómo Funciona?</h2>
    </div>
    <div class="row bottom-padder-md">
      <div class="col-md-4 col-md-offset-0 col-sm-10 col-sm-offset-1 col-md-offset-0 col-sm-10 col-sm-offset-1">
        <object data="images/endorse_onboard1.svg" type="image/svg+xml" alt="I'm Yeoman"></object>
        <p>First you will need to upload the root certificates corresponding to your country and type of electronic signature being used (e.g. Mexico - SAT)</p>
      </div>
      <div class="col-md-4 col-md-offset-0 col-sm-10 col-sm-offset-1">
        <object data="images/endorse_onboard2.svg" type="image/svg+xml" alt="I'm Yeoman"></object>
        <p>Next, you need to find the .xml file type sent to you after signing the document, which contains information regarding the document and its signers and will be necessary to verify the information.</p>
      </div>
      <div class="col-md-4 col-md-offset-0 col-sm-10 col-sm-offset-1">
        <object data="images/endorse_onboard3.svg" type="image/svg+xml" alt="I'm Yeoman"></object>
        <p>Finally, once you receive the results of the verification, ensure that all fields have a check mark next to it. If there are any errors, you should review the reason for the error and try again or contact the signers.</p>
      </div>
    </div>
    <div class="row top-padder-md">
      <button class="btn-lg btn-success" ui-sref="config">Get Started</button>
    </div>
  </div>

  <div class="row" ng-show="ready && !pdfUrl">
    <div class="upload text-center" dropzone>
      <div class="upload-default">
        <h5 class="bottom-padder-md">Drag the XML you want to verify.</h5>
        <button class="btn">or click here to select one</button>
        <input accept-name="XML" accept="text/xml" text="true" class="file-upload-input" fileread="upload" required="true" type="file">
      </div>
    </div>
  </div>

  <div ng-show="pdfUrl">
    <h2 class="bottom-padder-md center">Signatures</h2>
    <div class="table">
      <table id="general-info">
        <tr>
          <td><strong>Document Name</strong></td>
          <td>{{ doc.name }}</td>
        </tr>
        <tr>
          <td>
            <strong ng-class="{'text-success': oHashValid, 'text-danger': !oHashValid}">Original Hash <i class="glyphicon" ng-class="{'text-success': oHashValid, 'text-danger': !oHashValid, 'glyphicon-ok': oHashValid, 'glyphicon-remove': !oHashValid}"></i></strong>
          </td>
          <td>{{ doc.originalHash }}</td>
        </tr>
      </table>
      <table id="signers" ng-repeat="signature in signatures">
        <tr>
          <td><strong>Signed by</strong></td>
          <td>{{ signature.signer.name }} &lt;{{ signature.signer.email }}&gt;</td>
        </tr>
        <tr>
          <td><strong>RFC</strong></td>
          <td>{{ signature.signer.id }}</td>
        </tr>
        <tr>
          <td><strong>Signed date</strong></td>
          <td>{{ signature.signedAt }}</td>
        </tr>
        <tr>
         <td>
            <strong ng-class="{'text-success': signature.certificate.valid, 'text-danger': !signature.certificate.valid}">Certificate number <i class="glyphicon" ng-class="{'text-success': signature.certificate.valid, 'text-danger': !signature.certificate.valid, 'glyphicon-ok': signature.certificate.valid, 'glyphicon-remove': !signature.certificate.valid}"></i></strong>
          </td>
          <td>{{ signature.certificate.getSerialNumber() }}</td>
        </tr>
        <tr>
          <td> 
            <strong ng-class="{'text-success': signature.valid, 'text-danger': !signature.valid}">Signature <i class="glyphicon" ng-class="{'text-success': signature.valid, 'text-danger': !signature.valid, 'glyphicon-ok': signature.valid, 'glyphicon-remove': !signature.valid}"></i> </strong>
          </td>
          <td>{{ signature.sig('base64') }}</td>
        </tr>
      </table>
    </div>

    <p class="top-padder-md bottom-padder-md center"><strong>You can review the document that was signed below</strong></p>
    <hr>
    <div id="pdf-container" class="center top-padder-md">
      <ng-pdf template-url="views/pdfViewer.html"></ng-pdf>
    </div>
  </div>
</div>